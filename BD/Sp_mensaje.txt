-- MENSAJE
delimiter //
use CHAT//

drop procedure if exists sp_insertar_mensaje//
drop procedure if exists sp_mostrar_mensajes//
drop procedure if exists sp_buscar_mensaje//

CREATE PROCEDURE sp_insertar_mensaje(_id_cuenta int,_id_sala int,_mensaje text,_fecha datetime) 
BEGIN
	INSERT INTO MENSAJE (id_cuenta,id_sala,mensaje,fecha,activo) 
	VALUES(_id_cuenta,_id_sala,_mensaje,_fecha,true);
END//

CREATE PROCEDURE sp_mostrar_mensajes(_id_sala int)
BEGIN
	SELECT * FROM MENSAJE WHERE id_sala=_id_sala;
END//

CREATE PROCEDURE sp_buscar_mensaje(_id_cuenta int,_mensaje text)
BEGIN
	SELECT * FROM MENSAJE WHERE id_cuenta=_id_cuenta AND mensaje LIKE _mensaje;
END//



